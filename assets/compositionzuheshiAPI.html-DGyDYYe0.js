import{_ as s,c as a,a as e,o as p}from"./app-BJ3_yarB.js";const t={};function l(i,n){return p(),a("div",null,n[0]||(n[0]=[e(`<h2 id="setup" tabindex="-1"><a class="header-anchor" href="#setup"><span>setup</span></a></h2><h3 id="ç®€å•ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#ç®€å•ç”¨æ³•"><span>ç®€å•ç”¨æ³•</span></a></h3><blockquote><p>setupå‡½æ•°å¼Composition APIçš„å…¥å£ï¼Œåœ¨è¿™é‡Œé‡Œé¢å®šä¹‰çš„å˜é‡ï¼Œæ–¹æ³•éƒ½éœ€è¦returnå‡ºå»</p></blockquote><p>æŠŠvue2ä¸­çš„dataå’Œmethodsé…ç½®å‡½æ•°æ··åœ¨å•¦ä¸€èµ·</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">&#39;è·¯é£&#39;</span></span>
<span class="line">   <span class="token comment">//æ–¹æ³•</span></span>
<span class="line">   <span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">æˆ‘å«</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,æ˜¯è¦æˆä¸ºæµ·è´¼ç‹çš„ç”·äººï¼</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">   <span class="token comment">//è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line">   <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">    name<span class="token punctuation">,</span></span>
<span class="line">    say</span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="setupç»†èŠ‚é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#setupç»†èŠ‚é—®é¢˜"><span>setupç»†èŠ‚é—®é¢˜</span></a></h3><h4 id="æ‰§è¡Œæ—¶æœº" tabindex="-1"><a class="header-anchor" href="#æ‰§è¡Œæ—¶æœº"><span>æ‰§è¡Œæ—¶æœº</span></a></h4><ol><li>setupæ˜¯åœ¨beforeCreateç”Ÿå‘½å‘¨æœŸå›è°ƒä¹‹å‰å°±æ‰§è¡Œï¼Œè€Œä¸”å°±æ‰§è¡Œäº†ä¸€æ¬¡</li><li>setupåœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå½“å‰çš„ç»„ä»¶æ²¡æœ‰è¢«åˆ›å»ºå‡ºæ¥ï¼Œç»„ä»¶å®ä¾‹å¯¹è±¡thisä¸èƒ½ç”¨</li><li>thisæ˜¯undefinedï¼Œè¯´æ˜ä¸èƒ½é€šè¿‡thisè°ƒç”¨dataã€computedã€methodsã€propsç›¸å…³ä¿¡æ¯</li><li>å…¶å®æ‰€æœ‰çš„composition APIç›¸å…³å›è°ƒå‡½æ•°éƒ½ä¸å¯ä»¥</li></ol><h4 id="è¿”å›å€¼" tabindex="-1"><a class="header-anchor" href="#è¿”å›å€¼"><span>è¿”å›å€¼</span></a></h4><ol><li>è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä¸ºé¡µé¢æä¾›æ•°æ®ï¼Œåœ¨æ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨æ­¤å¯¹è±¡çš„æ–¹æ³•å’Œå±æ€§</li><li>è¿”å›å¯¹è±¡ä¸­çš„å±æ€§å’Œdataå‡½æ•°ä¸­è¿”å›çš„å¯¹è±¡å±æ€§åˆå¹¶</li><li>è¿”å›å¯¹è±¡ä¸­çš„æ–¹æ³•å’Œmethodsæ–¹æ³•åˆå¹¶</li><li>å¦‚æœæœ‰é‡åsetupä¼˜å…ˆ</li><li>ä¸€èˆ¬ä¸è¦æ··åˆä½¿ç”¨dataå’Œsetupä»¥åŠmethodså’Œsetup</li><li>ä¸èƒ½æ˜¯ä¸€ä¸ªasyncå‡½æ•°ï¼Œå› ä¸ºè¿”å›å€¼ä¸åœ¨æ˜¯ä¸€ä¸ªå¯¹è±¡è€Œæ˜¯ä¸€ä¸ªpromise</li></ol><h4 id="setupå‚æ•°" tabindex="-1"><a class="header-anchor" href="#setupå‚æ•°"><span>setupå‚æ•°</span></a></h4><ul><li>props æ¥æ”¶çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’çš„æ•°æ®</li><li>context <ul><li>attrså¯¹è±¡(è·å–ç»„ä»¶æ ‡ç­¾ä¸Šæ‰€æœ‰å±æ€§å¯¹è±¡ï¼Œå³ä½¿propsä¸Šæ²¡æœ‰ç”Ÿå‘½å®šä¹‰æ¥æ”¶çš„å±æ€§ï¼Œä»–ä¹Ÿèƒ½è·å–åˆ°è¯¥æ ‡ç­¾ä¸Šçš„å±æ€§)</li><li>emitæ–¹æ³•ï¼ˆåˆ†å‘äº‹ä»¶ï¼‰å¯ä»¥é€šè¿‡emitå®ç°å­ä¼ çˆ¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å±æ€§åå­—ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¼ çš„å€¼(ç›¸å½“äºv2çš„this.$emit)</li><li>slotså¯¹è±¡ï¼ˆæ’æ§½ï¼‰</li></ul></li></ul><h2 id="refä¸reactive" tabindex="-1"><a class="header-anchor" href="#refä¸reactive"><span>refä¸reactive</span></a></h2><h3 id="ref" tabindex="-1"><a class="header-anchor" href="#ref"><span>ref</span></a></h3><p>åœ¨setupä¸­å®šä¹‰çš„å˜é‡ä¸æ˜¯å“åº”å¼çš„ï¼Œæ­¤æ—¶éœ€è¦ç”¨refå°†å®ƒå˜æˆå“åº”å¼çš„</p><blockquote><p>refå‡½æ•°ä¼šæŠŠå˜é‡å˜æˆå¯¹è±¡ï¼Œåœ¨ä¿®æ”¹çš„æ—¶å€™è¦.valueå»ä¿®æ”¹ï¼Œé¡µé¢ä¸Šï¼Œvue3æ£€æµ‹åˆ°æ—¶refå¯¹è±¡å°±è‡ªåŠ¨ç»™.valueå•¦</p></blockquote><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span>ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> age<span class="token operator">=</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">      age<span class="token punctuation">.</span>value<span class="token operator">++</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span><span class="token punctuation">{</span></span>
<span class="line">      age<span class="token punctuation">,</span></span>
<span class="line">      setUser</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="reactive" tabindex="-1"><a class="header-anchor" href="#reactive"><span>reactive</span></a></h3><ul><li>æ¯”refæ›´å¥½ç”¨ï¼Œä¸ç”¨é€šè¿‡.valueå°±å¯ä»¥æ”¹å˜æ•°æ®</li><li>æ¥æ”¶ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªproxyä»£ç†å¯¹è±¡</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span>ref <span class="token punctuation">,</span>reactive<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// import HelloWorld from &#39;./components/HelloWorld.vue&#39;;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// components: {</span></span>
<span class="line">  <span class="token comment">//   HelloWorld</span></span>
<span class="line">  <span class="token comment">// }</span></span>
<span class="line">  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> user<span class="token operator">=</span><span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      name<span class="token operator">:</span><span class="token string">&#39;è·¯é£&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      age<span class="token operator">:</span><span class="token number">12</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">      user<span class="token punctuation">.</span>age<span class="token operator">++</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span><span class="token punctuation">{</span></span>
<span class="line">      user<span class="token punctuation">,</span></span>
<span class="line">      setUser</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>style<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="vue2å’Œvue3å“åº”å¼åŸç†ä¸åŒ" tabindex="-1"><a class="header-anchor" href="#vue2å’Œvue3å“åº”å¼åŸç†ä¸åŒ"><span>vue2å’Œvue3å“åº”å¼åŸç†ä¸åŒ</span></a></h3><p>vue2åŸç†ä½¿ç”¨<code>Object.defineProperty</code>ä¸­çš„getå’Œsetè¿›è¡Œæ•°æ®åŠ«æŒï¼Œä»–è¿™æ ·ä¼šå­˜åœ¨ä¸€å®šçš„ç¼ºé™·ï¼Œå½“æ–°å¢å’Œåˆ é™¤çš„æ—¶å€™æ•è·ä¸åˆ°ï¼Œå¯¼è‡´é¡µé¢ä¹Ÿä¸ä¼šæ›´æ–°</p><p>vue3ä¸­ä½¿ç”¨<code>proxy</code>(ä»£ç†)è¿æ¥å¯¹è±¡å¯¹è±¡ä¸­ä»»æ„å€¼çš„å˜æ¢æ·±åº¦ç›‘å¬å“åº”å¼çš„ï¼Œå†é€šè¿‡<code>Reflect</code>(åå°„)å¯¹æºå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œ</p><h2 id="computed-å’Œ-watch-è®¡ç®—å±æ€§å’Œç›‘å¬å±æ€§" tabindex="-1"><a class="header-anchor" href="#computed-å’Œ-watch-è®¡ç®—å±æ€§å’Œç›‘å¬å±æ€§"><span>computed å’Œ watch ï¼ˆè®¡ç®—å±æ€§å’Œç›‘å¬å±æ€§ï¼‰</span></a></h2><p>åœ¨setupä¸­ä½¿ç”¨éœ€è¦åœ¨vueä¸­å¼•å…¥ <code>import {...,computed,watch} from vue</code></p><h3 id="computed" tabindex="-1"><a class="header-anchor" href="#computed"><span>computed</span></a></h3><p>computed å¿…é¡»æœ‰ä¸€ä¸ªè¿”å›å€¼</p><p>ç¬¬ä¸€ç§å†™æ³•ï¼Œå¦‚æœåªä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¡¨ç¤ºget</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">const</span> fullName1<span class="token operator">=</span><span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">     <span class="token keyword">return</span> user<span class="token punctuation">.</span>firstName<span class="token operator">+</span><span class="token string">&#39;_&#39;</span><span class="token operator">+</span>user<span class="token punctuation">.</span>lastName</span>
<span class="line">   <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§å†™æ³•ï¼Œget å’Œ set</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">const</span> fullName2<span class="token operator">=</span><span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">     <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span> user<span class="token punctuation">.</span>firstName <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span> user<span class="token punctuation">.</span>lastName <span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token function">set</span><span class="token punctuation">(</span>val<span class="token operator">:</span>string<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        user<span class="token punctuation">.</span>firstName <span class="token operator">=</span> val<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;_&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></span>
<span class="line">        user<span class="token punctuation">.</span>lastName <span class="token operator">=</span> val<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;_&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="watch" tabindex="-1"><a class="header-anchor" href="#watch"><span>watch</span></a></h3><p>ç›‘å¬å•ä¸ª</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token function">watch</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;userå‘ç”Ÿå˜æ¢&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›‘å¬å¤šä¸ª</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>user<span class="token punctuation">,</span>age<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;useræˆ–ageå‘ä»€ä¹ˆå˜æ¢&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›‘è§†å¯¹è±¡ä¸­çš„å±æ€§</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>user<span class="token punctuation">.</span>firstName<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">firstNameæ”¹å˜äº†</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="watcheffect" tabindex="-1"><a class="header-anchor" href="#watcheffect"><span>watchEffect</span></a></h3><p>ä»–æ˜¯æ¥è·ŸwatchæŠ¢é¥­ç¢—çš„ï¼Œæ˜¯vue3æ–°ç‰¹æ€§ï¼Œé»˜è®¤å¼€å¯immediateï¼Œç”¨åˆ°äº†è°å°±ç›‘è§†è°</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> firstName<span class="token operator">=</span>user<span class="token punctuation">.</span>firstName</span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ğŸš€ ~ file: index.vue ~ line 52 ~ watchEffect ~ firstName&#39;</span><span class="token punctuation">,</span> firstName<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸ"><span>ç”Ÿå‘½å‘¨æœŸ</span></a></h2><p>åœ¨vue3ä¸­æ²¡æœ‰ <code>beforeCreate</code>ä¸<code>created</code>,setupå°±ç›¸å½“äºè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°</p><p>vue3å£°æ˜å‘¨æœŸéœ€è¦åœ¨vuxä¸­å¼•å…¥ ï¼Œæœ‰äº›å‡½æ•°åå­—å‘ç”Ÿäº†å˜æ¢ <code>import { ç”Ÿå‘½å‘¨æœŸ } from &#39;vue&#39;</code></p><p>beforeMount ===&gt;onBeforeMountï¼ˆdomå…ƒç´ åŠ è½½ä¹‹å‰ï¼Œå±æ€§æŒ‚è½½å®Œæ¯•ï¼‰ mounted=======&gt;onMounted ï¼ˆdomå…ƒç´ åŠ è½½å®Œæ¯•ï¼‰ beforeUpdate===&gt;onBeforeUpdate ï¼ˆdomå…ƒç´ æ›´æ–°ä¹‹å‰ï¼‰ updated =======&gt;onUpdated ï¼ˆdomå…ƒç´ æ›´æ–°ä¹‹åï¼‰ beforeUnmount ==&gt;onBeforeUnmount (ç»„ä»¶è¢«å¸è½½ä¹‹å‰) unmounted =====&gt;onUnmounted ï¼ˆç»„ä»¶è¢«é”€è´§ï¼‰</p><h2 id="è‡ªå®šä¹‰hook" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰hook"><span>è‡ªå®šä¹‰hook</span></a></h2><p>ç›¸å½“äºv2ä¸­çš„mixinæ··å…¥ï¼Œä¸åŒåœ¨ä¸ hooks æ˜¯å‡½æ•°</p><p>hookå‡½æ•°èƒ½å¸®åŠ©æˆ‘ä»¬æé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œè®©æˆ‘ä»¬åœ¨ä¸åŒçš„ç»„ä»¶ä¸­åˆ©ç”¨hookså‡½æ•°</p><p>ä¾‹å­ï¼šè·å–é¼ æ ‡ç‚¹å‡»ä½ç½® ä¾‹å¦‚åˆ›å»ºä¸€ä¸ªtsæ–‡ä»¶</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">,</span>onMounted<span class="token punctuation">,</span>onBeforeUnmount<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> x<span class="token operator">=</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">const</span> y<span class="token operator">=</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token function-variable function">savePoint</span><span class="token operator">=</span><span class="token punctuation">(</span>e<span class="token operator">:</span>MouseEvent<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">    x<span class="token punctuation">.</span>value<span class="token operator">=</span>e<span class="token punctuation">.</span>pageX</span>
<span class="line">    y<span class="token punctuation">.</span>value<span class="token operator">=</span>e<span class="token punctuation">.</span>pageY</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span>savePoint<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span>savePoint<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">    x<span class="token punctuation">,</span></span>
<span class="line">    y</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨vueæ–‡ä»¶ä¸­å¼•å…¥</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token literal-property property">x</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>x<span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">  <span class="token literal-property property">y</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>y<span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">import</span> mousePosition <span class="token keyword">from</span> <span class="token string">&#39;@/hooks/mousePosition&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line">  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">let</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">}</span><span class="token operator">=</span><span class="token function">mousePosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">return</span><span class="token punctuation">{</span></span>
<span class="line">        x<span class="token punctuation">,</span>y</span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="shallowreactiveå’Œshallowref" tabindex="-1"><a class="header-anchor" href="#shallowreactiveå’Œshallowref"><span>shallowReactiveå’ŒshallowRef</span></a></h2><p>æµ…å“åº”å¼ï¼Œæ·±å±‚æ•°æ®æ— æ³•å“åº”å¼ä¿®æ”¹</p><blockquote><p>shallowReactive : åªå¤„ç†äº†å¯¹è±¡å†…æœ€å¤–å±‚å±æ€§çš„å“åº”å¼(ä¹Ÿå°±æ˜¯æµ…å“åº”å¼)</p></blockquote><blockquote><p>shallowRef: åªå¤„ç†äº†valueçš„å“åº”å¼, ä¸è¿›è¡Œå¯¹è±¡çš„reactiveå¤„ç†</p></blockquote><ul><li>ä»€ä¹ˆæ—¶å€™ç”¨æµ…å“åº”å¼å‘¢? <ul><li>ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨refå’Œreactiveå³å¯</li><li>å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®, ç»“æ„æ¯”è¾ƒæ·±, ä½†å˜åŒ–æ—¶åªæ˜¯å¤–å±‚å±æ€§å˜åŒ– ===&gt; shallowReactive</li><li>å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®, åé¢ä¼šäº§ç”Ÿæ–°çš„å¯¹è±¡æ¥æ›¿æ¢ ===&gt; shallowRef</li></ul></li></ul><h2 id="readonlyå’Œshallowreadonly" tabindex="-1"><a class="header-anchor" href="#readonlyå’Œshallowreadonly"><span>readonlyå’ŒshallowReadonly</span></a></h2><p>åªè¯»å±æ€§</p><ul><li>readonly <ul><li>æ·±åº¦åªè¯»æ•°æ®</li><li>åªè¯»ä»£ç†æ˜¯æ·±å±‚çš„ï¼šè®¿é—®çš„ä»»ä½•åµŒå¥— property ä¹Ÿæ˜¯åªè¯»çš„</li></ul></li><li>shallowReadonly <ul><li>æµ…åªè¯»æ•°æ®</li><li>ç¬¬ä¸€æ¬¡æ˜¯åªè¯»çš„ï¼Œæ·±å±‚å°±ä¸åªè¯»å•¦</li></ul></li></ul><h2 id="toraw-ä¸-markraw" tabindex="-1"><a class="header-anchor" href="#toraw-ä¸-markraw"><span>toRaw ä¸ markRaw</span></a></h2><ul><li>toRaw <ul><li>å°†å“åº”å¼ä»£ç†è½¬æ¢ä¸ºæ™®é€šå¯¹è±¡</li></ul></li><li>markRaw <ul><li>æ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å…¶æ°¸è¿œä¸ä¼šè½¬æ¢ä¸ºä»£ç†</li><li>è®¾ç½®æŸäº›ç‰¹å®šçš„å€¼ï¼Œå½“æ¸²æŸ“å…·æœ‰ä¸å¯å˜æ•°æ®æºçš„å¤§åˆ—è¡¨æ—¶</li></ul></li></ul><h2 id="toref" tabindex="-1"><a class="header-anchor" href="#toref"><span>toRef</span></a></h2><ul><li>ä¸ºæºå“åº”å¼å¯¹è±¡ä¸Šçš„æŸä¸ªå±æ€§åˆ›å»ºä¸€ä¸ª refå¯¹è±¡, äºŒè€…å†…éƒ¨æ“ä½œçš„æ˜¯åŒä¸€ä¸ªæ•°æ®å€¼, æ›´æ–°æ—¶äºŒè€…æ˜¯åŒæ­¥çš„</li><li>åŒºåˆ«ref: æ‹·è´äº†ä¸€ä»½æ–°çš„æ•°æ®å€¼å•ç‹¬æ“ä½œ, æ›´æ–°æ—¶ç›¸äº’ä¸å½±å“</li></ul><h2 id="customref" tabindex="-1"><a class="header-anchor" href="#customref"><span>customRef</span></a></h2><ul><li>åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶</li></ul><h2 id="provide-ä¸-inject" tabindex="-1"><a class="header-anchor" href="#provide-ä¸-inject"><span>provide ä¸ inject</span></a></h2><ul><li>å®ç°è·¨å±‚çº§ç»„ä»¶(ç¥–å­™)é—´é€šä¿¡</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">// çˆ·çˆ·   æ³¨å†Œ</span></span>
<span class="line"><span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">&#39;color&#39;</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// å­™å­ è·å–</span></span>
<span class="line"><span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">&#39;color&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,69)]))}const c=s(t,[["render",l],["__file","compositionzuheshiAPI.html.vue"]]),u=JSON.parse('{"path":"/blogs/VUE3/compositionzuheshiAPI.html","title":"compositionç»„åˆå¼API","lang":"en-US","frontmatter":{"title":"compositionç»„åˆå¼API","date":"2022-9-27","autoSort":20,"number":2,"tags":["VUE3"],"categories":["VUE3"]},"headers":[{"level":2,"title":"setup","slug":"setup","link":"#setup","children":[{"level":3,"title":"ç®€å•ç”¨æ³•","slug":"ç®€å•ç”¨æ³•","link":"#ç®€å•ç”¨æ³•","children":[]},{"level":3,"title":"setupç»†èŠ‚é—®é¢˜","slug":"setupç»†èŠ‚é—®é¢˜","link":"#setupç»†èŠ‚é—®é¢˜","children":[]}]},{"level":2,"title":"refä¸reactive","slug":"refä¸reactive","link":"#refä¸reactive","children":[{"level":3,"title":"ref","slug":"ref","link":"#ref","children":[]},{"level":3,"title":"reactive","slug":"reactive","link":"#reactive","children":[]},{"level":3,"title":"vue2å’Œvue3å“åº”å¼åŸç†ä¸åŒ","slug":"vue2å’Œvue3å“åº”å¼åŸç†ä¸åŒ","link":"#vue2å’Œvue3å“åº”å¼åŸç†ä¸åŒ","children":[]}]},{"level":2,"title":"computed å’Œ watch ï¼ˆè®¡ç®—å±æ€§å’Œç›‘å¬å±æ€§ï¼‰","slug":"computed-å’Œ-watch-è®¡ç®—å±æ€§å’Œç›‘å¬å±æ€§","link":"#computed-å’Œ-watch-è®¡ç®—å±æ€§å’Œç›‘å¬å±æ€§","children":[{"level":3,"title":"computed","slug":"computed","link":"#computed","children":[]},{"level":3,"title":"watch","slug":"watch","link":"#watch","children":[]},{"level":3,"title":"watchEffect","slug":"watcheffect","link":"#watcheffect","children":[]}]},{"level":2,"title":"ç”Ÿå‘½å‘¨æœŸ","slug":"ç”Ÿå‘½å‘¨æœŸ","link":"#ç”Ÿå‘½å‘¨æœŸ","children":[]},{"level":2,"title":"è‡ªå®šä¹‰hook","slug":"è‡ªå®šä¹‰hook","link":"#è‡ªå®šä¹‰hook","children":[]},{"level":2,"title":"shallowReactiveå’ŒshallowRef","slug":"shallowreactiveå’Œshallowref","link":"#shallowreactiveå’Œshallowref","children":[]},{"level":2,"title":"readonlyå’ŒshallowReadonly","slug":"readonlyå’Œshallowreadonly","link":"#readonlyå’Œshallowreadonly","children":[]},{"level":2,"title":"toRaw ä¸ markRaw","slug":"toraw-ä¸-markraw","link":"#toraw-ä¸-markraw","children":[]},{"level":2,"title":"toRef","slug":"toref","link":"#toref","children":[]},{"level":2,"title":"customRef","slug":"customref","link":"#customref","children":[]},{"level":2,"title":"provide ä¸ inject","slug":"provide-ä¸-inject","link":"#provide-ä¸-inject","children":[]}],"git":{"createdTime":1728696783000,"updatedTime":1728696783000,"contributors":[{"name":"åˆ˜æ”¿æ¨","email":"314781333@qq.com","commits":1}]},"filePathRelative":"blogs/VUE3/compositionç»„åˆå¼API.md"}');export{c as comp,u as data};
