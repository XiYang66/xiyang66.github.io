import{_ as o,c,a as e,b as a,d as s,e as t,o as l,r as i}from"./app-BJ3_yarB.js";const u={},r={href:"http://cesium.xin/cesium/cn/Documentation1.95/Viewer.html?classFilter=viewer",target:"_blank",rel:"noopener noreferrer"},k={href:"http://cesium.xin/cesium/cn/Documentation1.95/EntityCollection.html",target:"_blank",rel:"noopener noreferrer"},d={href:"http://cesium.xin/cesium/cn/Documentation1.95/EntityCollection.html",target:"_blank",rel:"noopener noreferrer"};function v(m,n){const p=i("ExternalLinkIcon");return l(),c("div",null,[n[6]||(n[6]=e(`<h2 id="点位显示" tabindex="-1"><a class="header-anchor" href="#点位显示"><span>点位显示</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token operator">...</span></span>
<span class="line">  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadPoints</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// Vue方法定义</span></span>
<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 地图初始化</span></span>
<span class="line">    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token operator">...</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token comment">// 模拟点位数据</span></span>
<span class="line">    <span class="token function">loadPoints</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 用模拟数据测试</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>pointInfo <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;392f7fbb-ae25-4eef-ac43-58fd91148d1f&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">latitude</span><span class="token operator">:</span> <span class="token string">&#39;31.87532&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">longitude</span><span class="token operator">:</span> <span class="token string">&#39;120.55538&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">psName</span><span class="token operator">:</span> <span class="token string">&#39;有限公司1&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;0278a88c-b4f4-4d64-9ccb-65831b3fb19d&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">latitude</span><span class="token operator">:</span> <span class="token string">&#39;31.991057&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">longitude</span><span class="token operator">:</span> <span class="token string">&#39;120.700713&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">psName</span><span class="token operator">:</span> <span class="token string">&#39;有限公司2&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;248f6853-2ced-4aa6-b679-ea6422a5f3ac&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">latitude</span><span class="token operator">:</span> <span class="token string">&#39;31.94181&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">longitude</span><span class="token operator">:</span> <span class="token string">&#39;120.51517&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">psName</span><span class="token operator">:</span> <span class="token string">&#39;有限公司3&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;F8DADA95-A438-49E1-B263-63AE3BD7DAC4&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">latitude</span><span class="token operator">:</span> <span class="token string">&#39;31.97416&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">longitude</span><span class="token operator">:</span> <span class="token string">&#39;120.56132&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">psName</span><span class="token operator">:</span> <span class="token string">&#39;有限公司4&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;9402a911-78c5-466a-9162-d5b04d0e48f0&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">latitude</span><span class="token operator">:</span> <span class="token string">&#39;31.91604&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">longitude</span><span class="token operator">:</span> <span class="token string">&#39;120.57771&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">psName</span><span class="token operator">:</span> <span class="token string">&#39;有限公司5&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;EB392DD3-6998-437F-8DCB-F805AD4DB340&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">latitude</span><span class="token operator">:</span> <span class="token string">&#39;31.88727&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">longitude</span><span class="token operator">:</span> <span class="token string">&#39;120.48887&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">psName</span><span class="token operator">:</span> <span class="token string">&#39;有限公司6&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">]</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addMarker</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token comment">// cesium 加载点位</span></span>
<span class="line">    <span class="token function">addMarker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">const</span> Cesium <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cesium</span>
<span class="line">      <span class="token comment">// 清除上一次加载的点位</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token comment">// foreach循环加载点位</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>pointInfo<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pointObj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">name</span><span class="token operator">:</span> pointObj<span class="token punctuation">.</span>psName<span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">code</span><span class="token operator">:</span> pointObj<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">id</span><span class="token operator">:</span> pointObj<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">position</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span>pointObj<span class="token punctuation">.</span>longitude <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">,</span> pointObj<span class="token punctuation">.</span>latitude <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token comment">// 点</span></span>
<span class="line">          <span class="token comment">// point: {</span></span>
<span class="line">          <span class="token comment">//   pixelSize: 5,</span></span>
<span class="line">          <span class="token comment">//   color: Cesium.Color.RED,</span></span>
<span class="line">          <span class="token comment">//   outlineColor: Cesium.Color.WHITE,</span></span>
<span class="line">          <span class="token comment">//   outlineWidth: 2,</span></span>
<span class="line">          <span class="token comment">// },</span></span>
<span class="line">          <span class="token comment">// 文字标签</span></span>
<span class="line">          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// show: false,</span></span>
<span class="line">            <span class="token literal-property property">text</span><span class="token operator">:</span> pointObj<span class="token punctuation">.</span>psName<span class="token punctuation">,</span>  </span>
<span class="line">            <span class="token literal-property property">font</span><span class="token operator">:</span> <span class="token string">&quot;12px monospace&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">style</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>LabelStyle<span class="token punctuation">.</span><span class="token constant">FILL_AND_OUTLINE</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">fillColor</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token function">fromCssColorString</span><span class="token punctuation">(</span><span class="token string">&quot;rgb(11, 255, 244)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">outlineWidth</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">verticalOrigin</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>VerticalOrigin<span class="token punctuation">.</span><span class="token constant">BOTTOM</span><span class="token punctuation">,</span> <span class="token comment">// 垂直方向以底部来计算标签的位置</span></span>
<span class="line">            <span class="token literal-property property">pixelOffset</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 偏移量</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">           <span class="token comment">// 图标</span></span>
<span class="line">          <span class="token literal-property property">billboard</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">image</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@/assets/logo.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2)),a("p",null,[n[3]||(n[3]=s("这里用到啦API中的")),a("a",r,[n[0]||(n[0]=s("viewer")),t(p)]),n[4]||(n[4]=s("中")),a("a",k,[n[1]||(n[1]=s("entities.removeAll()")),t(p)]),n[5]||(n[5]=s("和")),a("a",d,[n[2]||(n[2]=s("entities.add()")),t(p)])]),n[7]||(n[7]=e(`<h2 id="点击坐标弹框显示" tabindex="-1"><a class="header-anchor" href="#点击坐标弹框显示"><span>点击坐标弹框显示</span></a></h2><blockquote><p>引入弹框组件</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">// 地图组件</span></span>
<span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;map-box&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">     <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 地图弹框 <span class="token operator">--</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;dynamic-layer&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;one&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;line&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;main&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>cesiumPopup <span class="token operator">:</span>pointInfo<span class="token operator">=</span><span class="token string">&quot;popData&quot;</span> ref<span class="token operator">=</span><span class="token string">&quot;popUp&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 下方箭头 <span class="token operator">--</span><span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;tooltip-arrow&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>
<span class="line"><span class="token comment">// 弹框组件</span></span>
<span class="line"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">    我是弹框</span>
<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#39;pointInfo&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// Vue方法定义</span></span>
<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">defalutSetting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>用到啦jQuery 需要 <code>npm i jQuery</code> 安装挂载到main.js中</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">&#39;jquery&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$ <span class="token operator">=</span> $<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>给地图绑定点击事件，使弹框元素出现</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token operator">...</span></span>
<span class="line">  <span class="token comment">// 给全图绑定事件</span></span>
<span class="line">  <span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ScreenSpaceEventHandler</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  handler<span class="token punctuation">.</span><span class="token function">setInputAction</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">click</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 屏幕坐标 转 世界坐标</span></span>
<span class="line">    <span class="token keyword">const</span> cartesian <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">pickEllipsoid</span><span class="token punctuation">(</span>click<span class="token punctuation">.</span>position<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>globe<span class="token punctuation">.</span>ellipsoid<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// 世界坐标 转 地理坐标</span></span>
<span class="line">    <span class="token keyword">const</span> cartographic <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartographic<span class="token punctuation">.</span><span class="token function">fromCartesian</span><span class="token punctuation">(</span>cartesian<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 保留5位数以十进制方式显示</span></span>
<span class="line">    <span class="token keyword">const</span> lon <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toDegrees</span><span class="token punctuation">(</span>cartographic<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> lat <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toDegrees</span><span class="token punctuation">(</span>cartographic<span class="token punctuation">.</span>latitude<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;🚀 ~ file: No01-init.vue ~ line 76 ~ handler.setInputAction ~ lat lon&quot;</span><span class="token punctuation">,</span>lon<span class="token punctuation">,</span>lat<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// 获取地图上的点位实体(entity)坐标</span></span>
<span class="line">    <span class="token keyword">const</span> pick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">pick</span><span class="token punctuation">(</span>click<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;🚀 ~ file: No01-init.vue ~ line 92 ~ handler.setInputAction ~ pick&quot;</span><span class="token punctuation">,</span> pick<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// 如果pick不是undefined 那么他就是点位</span></span>
<span class="line">    <span class="token keyword">if</span><span class="token punctuation">(</span>pick<span class="token operator">&amp;&amp;</span>pick<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">layerId</span><span class="token operator">:</span> <span class="token string">&quot;layer1&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 英文，且唯一,内部entity会用得到</span></span>
<span class="line">        <span class="token literal-property property">lon</span><span class="token operator">:</span> lon<span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">lat</span><span class="token operator">:</span> lat<span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token string">&quot;#one&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 弹框的唯一id</span></span>
<span class="line">        <span class="token literal-property property">boxHeightMax</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 中间立方体的最大高度</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">&quot;z-index&quot;</span><span class="token punctuation">,</span> <span class="token number">9990</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showDynamicLayer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 回调函数 改变弹窗的内容;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>popData<span class="token punctuation">.</span>title <span class="token operator">=</span> pick<span class="token punctuation">.</span>id<span class="token punctuation">.</span>name<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>popData<span class="token punctuation">.</span>pointId <span class="token operator">=</span> pick<span class="token punctuation">.</span>id<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token comment">// 调用弹框的默认方法</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>popUp<span class="token punctuation">.</span><span class="token function">defalutSetting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment">// 点位地图定位</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">locationToCenter</span><span class="token punctuation">(</span>lon<span class="token punctuation">,</span> lat<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 移除弹框</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeDynamicLayer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token string">&quot;#one&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">&quot;z-index&quot;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>Cesium<span class="token punctuation">.</span>ScreenSpaceEventType<span class="token punctuation">.</span><span class="token constant">LEFT_CLICK</span><span class="token punctuation">)</span>  <span class="token comment">//函数方法 单击</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token comment">// 创建一个动态实体弹窗</span></span>
<span class="line"><span class="token function">showDynamicLayer</span><span class="token punctuation">(</span><span class="token parameter">viewer<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* 弹窗的dom操作--默认必须*/</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用hide()或者display是不行的 因为cesium是用pre定时重绘的div导致 left top display 会一直重绘</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.dynamic-layer .line&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;.main&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">/* 弹窗的dom操作--针对性操作*/</span></span>
<span class="line">  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 添加div弹窗</span></span>
<span class="line">  <span class="token keyword">const</span> lon <span class="token operator">=</span> data<span class="token punctuation">.</span>lon <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">,</span> lat <span class="token operator">=</span> data<span class="token punctuation">.</span>lat <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">// data.boxHeightMax为undef也没事</span></span>
<span class="line">  <span class="token keyword">var</span> divPosition <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span>lon<span class="token punctuation">,</span> lat<span class="token punctuation">,</span> data<span class="token punctuation">.</span>boxHeightMax<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;.line&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">50</span> <span class="token comment">// 线的宽度</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;.main&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">// 当为true的时候，表示当element在地球背面会自动隐藏。默认为false，置为false，不会这样。但至少减轻判断计算压力</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">creatHtmlElement</span><span class="token punctuation">(</span>viewer<span class="token punctuation">,</span> data<span class="token punctuation">.</span>element<span class="token punctuation">,</span> divPosition<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token comment">// 创建一个 htmlElement元素 并且，其在earth背后会自动隐藏</span></span>
<span class="line"><span class="token function">creatHtmlElement</span><span class="token punctuation">(</span><span class="token parameter">viewer<span class="token punctuation">,</span> element<span class="token punctuation">,</span> position<span class="token punctuation">,</span> arr<span class="token punctuation">,</span> flog</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> Cesium <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cesium<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">var</span> ele <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">var</span> scratch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cesium二维笛卡尔 笛卡尔二维坐标系就是我们熟知的而二维坐标系；三维也如此</span></span>
<span class="line">  <span class="token keyword">var</span> scene <span class="token operator">=</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">,</span> camera <span class="token operator">=</span> viewer<span class="token punctuation">.</span>camera<span class="token punctuation">;</span></span>
<span class="line">  scene<span class="token punctuation">.</span>preRender<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> canvasPosition <span class="token operator">=</span> scene<span class="token punctuation">.</span><span class="token function">cartesianToCanvasCoordinates</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> scratch<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cartesianToCanvasCoordinates 笛卡尔坐标（3维度）到画布坐标</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span><span class="token function">defined</span><span class="token punctuation">(</span>canvasPosition<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      ele<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token punctuation">(</span>canvasPosition<span class="token punctuation">.</span>x <span class="token operator">+</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">534</span><span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">15</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;px&#39;</span><span class="token punctuation">;</span></span>
<span class="line">      ele<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token punctuation">(</span>canvasPosition<span class="token punctuation">.</span>y <span class="token operator">+</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">30</span> <span class="token operator">-</span> <span class="token number">22</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;px&#39;</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token comment">/* 此处进行判断**/</span><span class="token operator">/</span><span class="token operator">/</span> <span class="token keyword">var</span> px_position <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>SceneTransforms<span class="token punctuation">.</span><span class="token function">wgs84ToWindowCoordinates</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> cartesian<span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>flog <span class="token operator">&amp;&amp;</span> flog <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">var</span> e <span class="token operator">=</span> position<span class="token punctuation">,</span> i <span class="token operator">=</span> camera<span class="token punctuation">.</span>position<span class="token punctuation">,</span> n <span class="token operator">=</span> scene<span class="token punctuation">.</span>globe<span class="token punctuation">.</span>ellipsoid<span class="token punctuation">.</span><span class="token function">cartesianToCartographic</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span>height</span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>n <span class="token operator">+=</span> <span class="token number">1</span> <span class="token operator">*</span> scene<span class="token punctuation">.</span>globe<span class="token punctuation">.</span>ellipsoid<span class="token punctuation">.</span>maximumRadius<span class="token punctuation">,</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">distance</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token operator">&gt;</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token comment">// $(element).show()</span></span>
<span class="line">          ele<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;block&quot;</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">          ele<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token comment">// $(element).hide()</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token comment">// 移除动态弹窗 为了方便 这里的移除 是真的移除，因此 到时是需要重建弹窗的doom的</span></span>
<span class="line"><span class="token function">removeDynamicLayer</span><span class="token punctuation">(</span><span class="token parameter">viewer<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="定位中心点在地图中间" tabindex="-1"><a class="header-anchor" href="#定位中心点在地图中间"><span>定位中心点在地图中间</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token operator">...</span></span>
<span class="line">  <span class="token comment">// 给全图绑定事件</span></span>
<span class="line">  <span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ScreenSpaceEventHandler</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line">  handler<span class="token punctuation">.</span><span class="token function">setInputAction</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">click</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 点位地图定位</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">locationToCenter</span><span class="token punctuation">(</span>lon<span class="token punctuation">,</span> lat<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>Cesium<span class="token punctuation">.</span>ScreenSpaceEventType<span class="token punctuation">.</span><span class="token constant">LEFT_CLICK</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token operator">...</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token comment">// 点位定位到地图中心</span></span>
<span class="line"><span class="token function">locationToCenter</span><span class="token punctuation">(</span><span class="token parameter">lon<span class="token punctuation">,</span> lat</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> Cesium <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cesium<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> pointLocation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>BoundingSphere</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span>lon <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">,</span> lat <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 120.55538, 31.87532</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">flyToBoundingSphere</span><span class="token punctuation">(</span>pointLocation<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9))])}const y=o(u,[["render",v],["__file","dituzuobiaoyijidianjidankuang.html.vue"]]),g=JSON.parse('{"path":"/blogs/cesium/dituzuobiaoyijidianjidankuang.html","title":"地图坐标以及点击弹框","lang":"en-US","frontmatter":{"title":"地图坐标以及点击弹框","date":"2022-8-16","tags":["cesium三维地图"],"categories":["cesium"]},"headers":[{"level":2,"title":"点位显示","slug":"点位显示","link":"#点位显示","children":[]},{"level":2,"title":"点击坐标弹框显示","slug":"点击坐标弹框显示","link":"#点击坐标弹框显示","children":[]},{"level":2,"title":"定位中心点在地图中间","slug":"定位中心点在地图中间","link":"#定位中心点在地图中间","children":[]}],"git":{"createdTime":1728696783000,"updatedTime":1728696783000,"contributors":[{"name":"刘政杨","email":"314781333@qq.com","commits":1}]},"filePathRelative":"blogs/cesium/地图坐标以及点击弹框.md"}');export{y as comp,g as data};
